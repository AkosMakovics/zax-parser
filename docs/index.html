<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN"
    "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
<head>
<meta http-equiv="Content-Type" content="application/xhtml+xml; charset=UTF-8" />
<meta name="generator" content="AsciiDoc 8.6.9" />
<title>ZAX JSON PARSER</title>
<style type="text/css">
/* Shared CSS for AsciiDoc xhtml11 and html5 backends */

/* Default font. */
body {
  font-family: Georgia,serif;
}

/* Title font. */
h1, h2, h3, h4, h5, h6,
div.title, caption.title,
thead, p.table.header,
#toctitle,
#author, #revnumber, #revdate, #revremark,
#footer {
  font-family: Arial,Helvetica,sans-serif;
}

body {
  margin: 1em 5% 1em 5%;
}

a {
  color: blue;
  text-decoration: underline;
}
a:visited {
  color: fuchsia;
}

em {
  font-style: italic;
  color: navy;
}

strong {
  font-weight: bold;
  color: #083194;
}

h1, h2, h3, h4, h5, h6 {
  color: #527bbd;
  margin-top: 1.2em;
  margin-bottom: 0.5em;
  line-height: 1.3;
}

h1, h2, h3 {
  border-bottom: 2px solid silver;
}
h2 {
  padding-top: 0.5em;
}
h3 {
  float: left;
}
h3 + * {
  clear: left;
}
h5 {
  font-size: 1.0em;
}

div.sectionbody {
  margin-left: 0;
}

hr {
  border: 1px solid silver;
}

p {
  margin-top: 0.5em;
  margin-bottom: 0.5em;
}

ul, ol, li > p {
  margin-top: 0;
}
ul > li     { color: #aaa; }
ul > li > * { color: black; }

.monospaced, code, pre {
  font-family: "Courier New", Courier, monospace;
  font-size: inherit;
  color: navy;
  padding: 0;
  margin: 0;
}
pre {
  white-space: pre-wrap;
}

#author {
  color: #527bbd;
  font-weight: bold;
  font-size: 1.1em;
}
#email {
}
#revnumber, #revdate, #revremark {
}

#footer {
  font-size: small;
  border-top: 2px solid silver;
  padding-top: 0.5em;
  margin-top: 4.0em;
}
#footer-text {
  float: left;
  padding-bottom: 0.5em;
}
#footer-badges {
  float: right;
  padding-bottom: 0.5em;
}

#preamble {
  margin-top: 1.5em;
  margin-bottom: 1.5em;
}
div.imageblock, div.exampleblock, div.verseblock,
div.quoteblock, div.literalblock, div.listingblock, div.sidebarblock,
div.admonitionblock {
  margin-top: 1.0em;
  margin-bottom: 1.5em;
}
div.admonitionblock {
  margin-top: 2.0em;
  margin-bottom: 2.0em;
  margin-right: 10%;
  color: #606060;
}

div.content { /* Block element content. */
  padding: 0;
}

/* Block element titles. */
div.title, caption.title {
  color: #527bbd;
  font-weight: bold;
  text-align: left;
  margin-top: 1.0em;
  margin-bottom: 0.5em;
}
div.title + * {
  margin-top: 0;
}

td div.title:first-child {
  margin-top: 0.0em;
}
div.content div.title:first-child {
  margin-top: 0.0em;
}
div.content + div.title {
  margin-top: 0.0em;
}

div.sidebarblock > div.content {
  background: #ffffee;
  border: 1px solid #dddddd;
  border-left: 4px solid #f0f0f0;
  padding: 0.5em;
}

div.listingblock > div.content {
  border: 1px solid #dddddd;
  border-left: 5px solid #f0f0f0;
  background: #f8f8f8;
  padding: 0.5em;
}

div.quoteblock, div.verseblock {
  padding-left: 1.0em;
  margin-left: 1.0em;
  margin-right: 10%;
  border-left: 5px solid #f0f0f0;
  color: #888;
}

div.quoteblock > div.attribution {
  padding-top: 0.5em;
  text-align: right;
}

div.verseblock > pre.content {
  font-family: inherit;
  font-size: inherit;
}
div.verseblock > div.attribution {
  padding-top: 0.75em;
  text-align: left;
}
/* DEPRECATED: Pre version 8.2.7 verse style literal block. */
div.verseblock + div.attribution {
  text-align: left;
}

div.admonitionblock .icon {
  vertical-align: top;
  font-size: 1.1em;
  font-weight: bold;
  text-decoration: underline;
  color: #527bbd;
  padding-right: 0.5em;
}
div.admonitionblock td.content {
  padding-left: 0.5em;
  border-left: 3px solid #dddddd;
}

div.exampleblock > div.content {
  border-left: 3px solid #dddddd;
  padding-left: 0.5em;
}

div.imageblock div.content { padding-left: 0; }
span.image img { border-style: none; vertical-align: text-bottom; }
a.image:visited { color: white; }

dl {
  margin-top: 0.8em;
  margin-bottom: 0.8em;
}
dt {
  margin-top: 0.5em;
  margin-bottom: 0;
  font-style: normal;
  color: navy;
}
dd > *:first-child {
  margin-top: 0.1em;
}

ul, ol {
    list-style-position: outside;
}
ol.arabic {
  list-style-type: decimal;
}
ol.loweralpha {
  list-style-type: lower-alpha;
}
ol.upperalpha {
  list-style-type: upper-alpha;
}
ol.lowerroman {
  list-style-type: lower-roman;
}
ol.upperroman {
  list-style-type: upper-roman;
}

div.compact ul, div.compact ol,
div.compact p, div.compact p,
div.compact div, div.compact div {
  margin-top: 0.1em;
  margin-bottom: 0.1em;
}

tfoot {
  font-weight: bold;
}
td > div.verse {
  white-space: pre;
}

div.hdlist {
  margin-top: 0.8em;
  margin-bottom: 0.8em;
}
div.hdlist tr {
  padding-bottom: 15px;
}
dt.hdlist1.strong, td.hdlist1.strong {
  font-weight: bold;
}
td.hdlist1 {
  vertical-align: top;
  font-style: normal;
  padding-right: 0.8em;
  color: navy;
}
td.hdlist2 {
  vertical-align: top;
}
div.hdlist.compact tr {
  margin: 0;
  padding-bottom: 0;
}

.comment {
  background: yellow;
}

.footnote, .footnoteref {
  font-size: 0.8em;
}

span.footnote, span.footnoteref {
  vertical-align: super;
}

#footnotes {
  margin: 20px 0 20px 0;
  padding: 7px 0 0 0;
}

#footnotes div.footnote {
  margin: 0 0 5px 0;
}

#footnotes hr {
  border: none;
  border-top: 1px solid silver;
  height: 1px;
  text-align: left;
  margin-left: 0;
  width: 20%;
  min-width: 100px;
}

div.colist td {
  padding-right: 0.5em;
  padding-bottom: 0.3em;
  vertical-align: top;
}
div.colist td img {
  margin-top: 0.3em;
}

@media print {
  #footer-badges { display: none; }
}

#toc {
  margin-bottom: 2.5em;
}

#toctitle {
  color: #527bbd;
  font-size: 1.1em;
  font-weight: bold;
  margin-top: 1.0em;
  margin-bottom: 0.1em;
}

div.toclevel0, div.toclevel1, div.toclevel2, div.toclevel3, div.toclevel4 {
  margin-top: 0;
  margin-bottom: 0;
}
div.toclevel2 {
  margin-left: 2em;
  font-size: 0.9em;
}
div.toclevel3 {
  margin-left: 4em;
  font-size: 0.9em;
}
div.toclevel4 {
  margin-left: 6em;
  font-size: 0.9em;
}

span.aqua { color: aqua; }
span.black { color: black; }
span.blue { color: blue; }
span.fuchsia { color: fuchsia; }
span.gray { color: gray; }
span.green { color: green; }
span.lime { color: lime; }
span.maroon { color: maroon; }
span.navy { color: navy; }
span.olive { color: olive; }
span.purple { color: purple; }
span.red { color: red; }
span.silver { color: silver; }
span.teal { color: teal; }
span.white { color: white; }
span.yellow { color: yellow; }

span.aqua-background { background: aqua; }
span.black-background { background: black; }
span.blue-background { background: blue; }
span.fuchsia-background { background: fuchsia; }
span.gray-background { background: gray; }
span.green-background { background: green; }
span.lime-background { background: lime; }
span.maroon-background { background: maroon; }
span.navy-background { background: navy; }
span.olive-background { background: olive; }
span.purple-background { background: purple; }
span.red-background { background: red; }
span.silver-background { background: silver; }
span.teal-background { background: teal; }
span.white-background { background: white; }
span.yellow-background { background: yellow; }

span.big { font-size: 2em; }
span.small { font-size: 0.6em; }

span.underline { text-decoration: underline; }
span.overline { text-decoration: overline; }
span.line-through { text-decoration: line-through; }

div.unbreakable { page-break-inside: avoid; }


/*
 * xhtml11 specific
 *
 * */

div.tableblock {
  margin-top: 1.0em;
  margin-bottom: 1.5em;
}
div.tableblock > table {
  border: 3px solid #527bbd;
}
thead, p.table.header {
  font-weight: bold;
  color: #527bbd;
}
p.table {
  margin-top: 0;
}
/* Because the table frame attribute is overriden by CSS in most browsers. */
div.tableblock > table[frame="void"] {
  border-style: none;
}
div.tableblock > table[frame="hsides"] {
  border-left-style: none;
  border-right-style: none;
}
div.tableblock > table[frame="vsides"] {
  border-top-style: none;
  border-bottom-style: none;
}


/*
 * html5 specific
 *
 * */

table.tableblock {
  margin-top: 1.0em;
  margin-bottom: 1.5em;
}
thead, p.tableblock.header {
  font-weight: bold;
  color: #527bbd;
}
p.tableblock {
  margin-top: 0;
}
table.tableblock {
  border-width: 3px;
  border-spacing: 0px;
  border-style: solid;
  border-color: #527bbd;
  border-collapse: collapse;
}
th.tableblock, td.tableblock {
  border-width: 1px;
  padding: 4px;
  border-style: solid;
  border-color: #527bbd;
}

table.tableblock.frame-topbot {
  border-left-style: hidden;
  border-right-style: hidden;
}
table.tableblock.frame-sides {
  border-top-style: hidden;
  border-bottom-style: hidden;
}
table.tableblock.frame-none {
  border-style: hidden;
}

th.tableblock.halign-left, td.tableblock.halign-left {
  text-align: left;
}
th.tableblock.halign-center, td.tableblock.halign-center {
  text-align: center;
}
th.tableblock.halign-right, td.tableblock.halign-right {
  text-align: right;
}

th.tableblock.valign-top, td.tableblock.valign-top {
  vertical-align: top;
}
th.tableblock.valign-middle, td.tableblock.valign-middle {
  vertical-align: middle;
}
th.tableblock.valign-bottom, td.tableblock.valign-bottom {
  vertical-align: bottom;
}


/*
 * manpage specific
 *
 * */

body.manpage h1 {
  padding-top: 0.5em;
  padding-bottom: 0.5em;
  border-top: 2px solid silver;
  border-bottom: 2px solid silver;
}
body.manpage h2 {
  border-style: none;
}
body.manpage div.sectionbody {
  margin-left: 3em;
}

@media print {
  body.manpage div#toc { display: none; }
}
.highlight .hll { background-color: #ffffcc }
.highlight  { background: #f8f8f8; }
.highlight .c { color: #408080; font-style: italic } /* Comment */
.highlight .err { border: 1px solid #FF0000 } /* Error */
.highlight .k { color: #008000; font-weight: bold } /* Keyword */
.highlight .o { color: #666666 } /* Operator */
.highlight .cm { color: #408080; font-style: italic } /* Comment.Multiline */
.highlight .cp { color: #BC7A00 } /* Comment.Preproc */
.highlight .c1 { color: #408080; font-style: italic } /* Comment.Single */
.highlight .cs { color: #408080; font-style: italic } /* Comment.Special */
.highlight .gd { color: #A00000 } /* Generic.Deleted */
.highlight .ge { font-style: italic } /* Generic.Emph */
.highlight .gr { color: #FF0000 } /* Generic.Error */
.highlight .gh { color: #000080; font-weight: bold } /* Generic.Heading */
.highlight .gi { color: #00A000 } /* Generic.Inserted */
.highlight .go { color: #808080 } /* Generic.Output */
.highlight .gp { color: #000080; font-weight: bold } /* Generic.Prompt */
.highlight .gs { font-weight: bold } /* Generic.Strong */
.highlight .gu { color: #800080; font-weight: bold } /* Generic.Subheading */
.highlight .gt { color: #0040D0 } /* Generic.Traceback */
.highlight .kc { color: #008000; font-weight: bold } /* Keyword.Constant */
.highlight .kd { color: #008000; font-weight: bold } /* Keyword.Declaration */
.highlight .kn { color: #008000; font-weight: bold } /* Keyword.Namespace */
.highlight .kp { color: #008000 } /* Keyword.Pseudo */
.highlight .kr { color: #008000; font-weight: bold } /* Keyword.Reserved */
.highlight .kt { color: #B00040 } /* Keyword.Type */
.highlight .m { color: #666666 } /* Literal.Number */
.highlight .s { color: #BA2121 } /* Literal.String */
.highlight .na { color: #7D9029 } /* Name.Attribute */
.highlight .nb { color: #008000 } /* Name.Builtin */
.highlight .nc { color: #0000FF; font-weight: bold } /* Name.Class */
.highlight .no { color: #880000 } /* Name.Constant */
.highlight .nd { color: #AA22FF } /* Name.Decorator */
.highlight .ni { color: #999999; font-weight: bold } /* Name.Entity */
.highlight .ne { color: #D2413A; font-weight: bold } /* Name.Exception */
.highlight .nf { color: #0000FF } /* Name.Function */
.highlight .nl { color: #A0A000 } /* Name.Label */
.highlight .nn { color: #0000FF; font-weight: bold } /* Name.Namespace */
.highlight .nt { color: #008000; font-weight: bold } /* Name.Tag */
.highlight .nv { color: #19177C } /* Name.Variable */
.highlight .ow { color: #AA22FF; font-weight: bold } /* Operator.Word */
.highlight .w { color: #bbbbbb } /* Text.Whitespace */
.highlight .mf { color: #666666 } /* Literal.Number.Float */
.highlight .mh { color: #666666 } /* Literal.Number.Hex */
.highlight .mi { color: #666666 } /* Literal.Number.Integer */
.highlight .mo { color: #666666 } /* Literal.Number.Oct */
.highlight .sb { color: #BA2121 } /* Literal.String.Backtick */
.highlight .sc { color: #BA2121 } /* Literal.String.Char */
.highlight .sd { color: #BA2121; font-style: italic } /* Literal.String.Doc */
.highlight .s2 { color: #BA2121 } /* Literal.String.Double */
.highlight .se { color: #BB6622; font-weight: bold } /* Literal.String.Escape */
.highlight .sh { color: #BA2121 } /* Literal.String.Heredoc */
.highlight .si { color: #BB6688; font-weight: bold } /* Literal.String.Interpol */
.highlight .sx { color: #008000 } /* Literal.String.Other */
.highlight .sr { color: #BB6688 } /* Literal.String.Regex */
.highlight .s1 { color: #BA2121 } /* Literal.String.Single */
.highlight .ss { color: #19177C } /* Literal.String.Symbol */
.highlight .bp { color: #008000 } /* Name.Builtin.Pseudo */
.highlight .vc { color: #19177C } /* Name.Variable.Class */
.highlight .vg { color: #19177C } /* Name.Variable.Global */
.highlight .vi { color: #19177C } /* Name.Variable.Instance */
.highlight .il { color: #666666 } /* Literal.Number.Integer.Long */


</style>
<script type="text/javascript">
/*<![CDATA[*/
var asciidoc = {  // Namespace.

/////////////////////////////////////////////////////////////////////
// Table Of Contents generator
/////////////////////////////////////////////////////////////////////

/* Author: Mihai Bazon, September 2002
 * http://students.infoiasi.ro/~mishoo
 *
 * Table Of Content generator
 * Version: 0.4
 *
 * Feel free to use this script under the terms of the GNU General Public
 * License, as long as you do not remove or alter this notice.
 */

 /* modified by Troy D. Hanson, September 2006. License: GPL */
 /* modified by Stuart Rackham, 2006, 2009. License: GPL */

// toclevels = 1..4.
toc: function (toclevels) {

  function getText(el) {
    var text = "";
    for (var i = el.firstChild; i != null; i = i.nextSibling) {
      if (i.nodeType == 3 /* Node.TEXT_NODE */) // IE doesn't speak constants.
        text += i.data;
      else if (i.firstChild != null)
        text += getText(i);
    }
    return text;
  }

  function TocEntry(el, text, toclevel) {
    this.element = el;
    this.text = text;
    this.toclevel = toclevel;
  }

  function tocEntries(el, toclevels) {
    var result = new Array;
    var re = new RegExp('[hH]([1-'+(toclevels+1)+'])');
    // Function that scans the DOM tree for header elements (the DOM2
    // nodeIterator API would be a better technique but not supported by all
    // browsers).
    var iterate = function (el) {
      for (var i = el.firstChild; i != null; i = i.nextSibling) {
        if (i.nodeType == 1 /* Node.ELEMENT_NODE */) {
          var mo = re.exec(i.tagName);
          if (mo && (i.getAttribute("class") || i.getAttribute("className")) != "float") {
            result[result.length] = new TocEntry(i, getText(i), mo[1]-1);
          }
          iterate(i);
        }
      }
    }
    iterate(el);
    return result;
  }

  var toc = document.getElementById("toc");
  if (!toc) {
    return;
  }

  // Delete existing TOC entries in case we're reloading the TOC.
  var tocEntriesToRemove = [];
  var i;
  for (i = 0; i < toc.childNodes.length; i++) {
    var entry = toc.childNodes[i];
    if (entry.nodeName.toLowerCase() == 'div'
     && entry.getAttribute("class")
     && entry.getAttribute("class").match(/^toclevel/))
      tocEntriesToRemove.push(entry);
  }
  for (i = 0; i < tocEntriesToRemove.length; i++) {
    toc.removeChild(tocEntriesToRemove[i]);
  }

  // Rebuild TOC entries.
  var entries = tocEntries(document.getElementById("content"), toclevels);
  for (var i = 0; i < entries.length; ++i) {
    var entry = entries[i];
    if (entry.element.id == "")
      entry.element.id = "_toc_" + i;
    var a = document.createElement("a");
    a.href = "#" + entry.element.id;
    a.appendChild(document.createTextNode(entry.text));
    var div = document.createElement("div");
    div.appendChild(a);
    div.className = "toclevel" + entry.toclevel;
    toc.appendChild(div);
  }
  if (entries.length == 0)
    toc.parentNode.removeChild(toc);
},


/////////////////////////////////////////////////////////////////////
// Footnotes generator
/////////////////////////////////////////////////////////////////////

/* Based on footnote generation code from:
 * http://www.brandspankingnew.net/archive/2005/07/format_footnote.html
 */

footnotes: function () {
  // Delete existing footnote entries in case we're reloading the footnodes.
  var i;
  var noteholder = document.getElementById("footnotes");
  if (!noteholder) {
    return;
  }
  var entriesToRemove = [];
  for (i = 0; i < noteholder.childNodes.length; i++) {
    var entry = noteholder.childNodes[i];
    if (entry.nodeName.toLowerCase() == 'div' && entry.getAttribute("class") == "footnote")
      entriesToRemove.push(entry);
  }
  for (i = 0; i < entriesToRemove.length; i++) {
    noteholder.removeChild(entriesToRemove[i]);
  }

  // Rebuild footnote entries.
  var cont = document.getElementById("content");
  var spans = cont.getElementsByTagName("span");
  var refs = {};
  var n = 0;
  for (i=0; i<spans.length; i++) {
    if (spans[i].className == "footnote") {
      n++;
      var note = spans[i].getAttribute("data-note");
      if (!note) {
        // Use [\s\S] in place of . so multi-line matches work.
        // Because JavaScript has no s (dotall) regex flag.
        note = spans[i].innerHTML.match(/\s*\[([\s\S]*)]\s*/)[1];
        spans[i].innerHTML =
          "[<a id='_footnoteref_" + n + "' href='#_footnote_" + n +
          "' title='View footnote' class='footnote'>" + n + "</a>]";
        spans[i].setAttribute("data-note", note);
      }
      noteholder.innerHTML +=
        "<div class='footnote' id='_footnote_" + n + "'>" +
        "<a href='#_footnoteref_" + n + "' title='Return to text'>" +
        n + "</a>. " + note + "</div>";
      var id =spans[i].getAttribute("id");
      if (id != null) refs["#"+id] = n;
    }
  }
  if (n == 0)
    noteholder.parentNode.removeChild(noteholder);
  else {
    // Process footnoterefs.
    for (i=0; i<spans.length; i++) {
      if (spans[i].className == "footnoteref") {
        var href = spans[i].getElementsByTagName("a")[0].getAttribute("href");
        href = href.match(/#.*/)[0];  // Because IE return full URL.
        n = refs[href];
        spans[i].innerHTML =
          "[<a href='#_footnote_" + n +
          "' title='View footnote' class='footnote'>" + n + "</a>]";
      }
    }
  }
},

install: function(toclevels) {
  var timerId;

  function reinstall() {
    asciidoc.footnotes();
    if (toclevels) {
      asciidoc.toc(toclevels);
    }
  }

  function reinstallAndRemoveTimer() {
    clearInterval(timerId);
    reinstall();
  }

  timerId = setInterval(reinstall, 500);
  if (document.addEventListener)
    document.addEventListener("DOMContentLoaded", reinstallAndRemoveTimer, false);
  else
    window.onload = reinstallAndRemoveTimer;
}

}
asciidoc.install(2);
/*]]>*/
</script>
</head>
<body class="article">
<div id="header">
<h1>ZAX JSON PARSER</h1>
<div id="toc">
  <div id="toctitle">Table of Contents</div>
  <noscript><p><b>JavaScript must be enabled in your browser to display the table of contents.</b></p></noscript>
</div>
</div>
<div id="content">
<div id="preamble">
<div class="sectionbody">
<div class="paragraph"><p>Code:</p></div>
<div class="listingblock">
<div class="content"><div class="highlight"><pre><span></span><span class="cp">#define some_json_properties JSON_PROPERTY(x), JSON_PROPERTY(title), JSON_PROPERTY(scores)</span>

<span class="k">struct</span> <span class="nc">some_class</span>
<span class="p">{</span>
    <span class="kt">int</span> <span class="n">x</span> <span class="o">=</span> <span class="mi">9</span><span class="p">;</span>
    <span class="n">std</span><span class="o">::</span><span class="n">string</span> <span class="n">title</span> <span class="o">=</span> <span class="s">&quot;some title&quot;</span><span class="p">;</span>
    <span class="n">std</span><span class="o">::</span><span class="n">vector</span><span class="o">&lt;</span><span class="n">std</span><span class="o">::</span><span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;&gt;</span> <span class="n">scores</span> <span class="o">=</span> <span class="p">{{</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">},</span> <span class="p">{</span><span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">6</span><span class="p">}};</span>

    <span class="n">ZAX_JSON_SERIALIZABLE</span><span class="p">(</span><span class="n">some_class</span><span class="p">,</span> <span class="n">some_json_properties</span><span class="p">)</span>
<span class="p">};</span>

<span class="n">some_class</span> <span class="n">some_obj</span> <span class="o">=</span> <span class="sa">R</span><span class="s">&quot;</span><span class="dl">(</span><span class="s">{&quot;x&quot;:17, &quot;title&quot;:&quot;new title&quot;, &quot;scores&quot;:[[1, 1, 2], [3], [5, 8], [13, 21]]}</span><span class="dl">)</span><span class="s">&quot;</span><span class="p">;</span>
<span class="n">std</span><span class="o">::</span><span class="n">string</span> <span class="n">some_json</span> <span class="o">=</span> <span class="n">some_obj</span><span class="p">;</span>
<span class="n">std</span><span class="o">::</span><span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="n">some_json</span> <span class="o">&lt;&lt;</span> <span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span>
</pre></div></div></div>
<div class="paragraph"><p>Result:</p></div>
<div class="listingblock">
<div class="content"><div class="highlight"><pre><span></span><span class="p">{</span><span class="s">&quot;x&quot;</span><span class="o">:</span><span class="mi">17</span><span class="p">,</span> <span class="s">&quot;title&quot;</span><span class="o">:</span><span class="s">&quot;new title&quot;</span><span class="p">,</span> <span class="s">&quot;scores&quot;</span><span class="o">:</span><span class="p">[[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">],</span> <span class="p">[</span><span class="mi">3</span><span class="p">],</span> <span class="p">[</span><span class="mi">5</span><span class="p">,</span> <span class="mi">8</span><span class="p">],</span> <span class="p">[</span><span class="mi">13</span><span class="p">,</span> <span class="mi">21</span><span class="p">]]}</span>
</pre></div></div></div>
<div class="paragraph"><p>Zax json parser is a very basic JSON parser implemented in C++ 11 with probably the simplest possible interface, providing a kind of a struct to JSON and JSON to struct conversion.<br />
GCC, CLang or Intel compilers are needed in order to compile. Microsoft&#8217;s compiler is not supported due to some bugs in its variadic macro handling. The library is using heavily the template argument deduction feature of modern compilers.<br />
The library seems to work, but it has minimal tests, and its error handling was not tested. I made it public because I was searching for something similar in C++ previously without luck, and I hope it will be useful for someone. The implementation is missing some features, as I have implemented only the features I needed.<br />
Note, that C structures are not fully compatible with the JSON concept, therefore some features are supported in a specific manner: for example a value of <em>null</em> in the JSON string cannot delete the member from the C structure. Also, all the type information in a JSON string will be lost: the types of values will be determinded by the types of the fields of the classes.</p></div>
<div class="paragraph"><p>Compiles with the following compilers (and probably with their newer versions):</p></div>
<div class="ulist"><ul>
<li>
<p>
Intel compiler (ICC) version 19 to 21
</p>
</li>
<li>
<p>
GCC version 6 to 10
</p>
</li>
<li>
<p>
Clang version 6 to 11
</p>
</li>
</ul></div>
<div class="paragraph"><p>(<a href="https://gcc.godbolt.org/">https://gcc.godbolt.org/</a>)</p></div>
</div>
</div>
<div class="sect1">
<h2 id="_architecture">Architecture</h2>
<div class="sectionbody">
<div class="paragraph"><p>Zax parser has a layered architecture. All the layers are accessible via an API.</p></div>
<div class="paragraph"><p>&#160;<br /></p></div>
<div class="olist arabic"><ol class="arabic">
<li>
<p>
<a href="#ZaxJsonTopTokenizer">ZaxJsonTopTokenizer</a>
</p>
</li>
<li>
<p>
<a href="#Converter_functions">Converter functions:</a>
</p>
<div class="ulist"><ul>
<li>
<p>
<a href="#zax_convert_from_json">zax_convert_from_json()</a>
</p>
</li>
<li>
<p>
<a href="#zax_convert_to_json">zax_convert_to_json()</a>
</p>
</li>
</ul></div>
</li>
<li>
<p>
<a href="#SERIALIZABLE_macros">"SERIALIZABLE" macros:</a>
</p>
<div class="ulist"><ul>
<li>
<p>
<a href="#ZAX_JSON_SERIALIZABLE">ZAX_JSON_SERIALIZABLE</a>
</p>
</li>
<li>
<p>
<a href="#ZAX_JSON_SERIALIZABLE_WDC">ZAX_JSON_SERIALIZABLE_WDC</a>
</p>
</li>
<li>
<p>
<a href="#ZAX_JSON_SERIALIZABLE_BASIC">ZAX_JSON_SERIALIZABLE_BASIC</a>
</p>
</li>
</ul></div>
</li>
</ol></div>
</div>
</div>
<div class="sect1">
<h2 id="ZaxJsonTopTokenizer">ZaxJsonTopTokenizer</h2>
<div class="sectionbody">
<div class="paragraph"><p>&#160;<br /></p></div>
<div class="paragraph"><p>Tokenizes the top element of a JSON string. The tokenized values are stored either in the <em>m_values</em> or the <em>m_list_values</em> member of the class, depending on whether the top element is a dictionary or a list.
Using ZaxJsonTopTokenizer class, a kind of a lazy parsing can be achieved.</p></div>
<div class="paragraph"><p>&#160;<br /></p></div>
<div class="paragraph"><p><strong><em>It is recommended if there is no need to parse the whole JSON string.</em></strong></p></div>
<div class="paragraph"><p>&#160;<br /></p></div>
<div class="paragraph"><p>Constructor Syntax: <strong>ZaxJsonTopTokenizer([a_json], [a_in_situ], [a_success])</strong></p></div>
<div class="ulist"><div class="title"><em>Parameters</em></div><ul>
<li>
<p>
<em>a_json</em>: (input)(const, char*) json string. Even it is passed as const, the string content might be changed during parsing.
</p>
</li>
<li>
<p>
<em>a_in_situ</em>: (input)(boolean) if <em>true</em>, the input string will be altered during parsing, resulting in a better performance. If you want to have your input string untouched, please set it to <em>false</em>. Default value is <em>true</em>.
</p>
</li>
<li>
<p>
<em>a_success</em>: (output)(boolean*) if used, the passed parameter will get a value of <em>true</em> if the parsing was successful, and a value of <em>false</em> otherwise. Default value is 0.
</p>
</li>
</ul></div>
<div class="ulist"><div class="title"><em>Returns</em></div><ul>
<li>
<p>
-
</p>
</li>
</ul></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img src="./images/icons/note.png" alt="Note" />
</td>
<td class="content">The library was not tested with invalid JSONS strings.</td>
</tr></table>
</div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img src="./images/icons/note.png" alt="Note" />
</td>
<td class="content">All the resulting tokens are <em>char*</em> strings, and may point in the original buffer, or a newly allocated one, depending on the value of the <em>a_in_situ</em> argument.</td>
</tr></table>
</div>
<div class="paragraph"><p><em>Example 1:</em></p></div>
<div class="listingblock">
<div class="content"><div class="highlight"><pre><span></span><span class="n">ZaxJsonTopTokenizer</span> <span class="nf">json_doc</span><span class="p">(</span><span class="s">&quot;{</span><span class="se">\&quot;</span><span class="s">title</span><span class="se">\&quot;</span><span class="s">:</span><span class="se">\&quot;</span><span class="s">some title</span><span class="se">\&quot;</span><span class="s">,</span><span class="se">\&quot;</span><span class="s">x</span><span class="se">\&quot;</span><span class="s">:17}&quot;</span><span class="p">,</span> <span class="nb">false</span><span class="p">);</span>

<span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="n">json_doc</span><span class="p">.</span><span class="n">m_values</span><span class="p">[</span><span class="s">&quot;title&quot;</span><span class="p">]</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;</span>
<span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="n">json_doc</span><span class="p">.</span><span class="n">m_values</span><span class="p">[</span><span class="s">&quot;x&quot;</span><span class="p">]</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;</span>
</pre></div></div></div>
<div class="paragraph"><p><em>Result:</em></p></div>
<div class="listingblock">
<div class="content"><div class="highlight"><pre><span></span><span class="n">some</span> <span class="n">title</span>
<span class="mi">17</span>
</pre></div></div></div>
<div class="paragraph"><p><em>Example 2:</em></p></div>
<div class="listingblock">
<div class="content"><div class="highlight"><pre><span></span><span class="n">ZaxJsonTopTokenizer</span> <span class="nf">json_doc</span><span class="p">(</span><span class="s">&quot;{</span><span class="se">\&quot;</span><span class="s">title</span><span class="se">\&quot;</span><span class="s">:</span><span class="se">\&quot;</span><span class="s">some title</span><span class="se">\&quot;</span><span class="s">,</span><span class="se">\&quot;</span><span class="s">x</span><span class="se">\&quot;</span><span class="s">:17}&quot;</span><span class="p">,</span> <span class="nb">false</span><span class="p">);</span>

<span class="k">const</span> <span class="kt">char</span><span class="o">*</span> <span class="n">tmp</span> <span class="o">=</span> <span class="n">json_doc</span><span class="p">.</span><span class="n">m_values</span><span class="p">[</span><span class="s">&quot;no_such_key&quot;</span><span class="p">];</span>
<span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="p">(</span><span class="kt">int</span><span class="p">)</span> <span class="n">tmp</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;</span>
</pre></div></div></div>
<div class="paragraph"><p><em>Result:</em></p></div>
<div class="listingblock">
<div class="content"><div class="highlight"><pre><span></span><span class="mi">0</span>
</pre></div></div></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img src="./images/icons/note.png" alt="Note" />
</td>
<td class="content">The return value should be checked for a <em>0</em> value. In case of lists, over indexing is not allowed.</td>
</tr></table>
</div>
<div class="paragraph"><p><em>Example 3:</em></p></div>
<div class="listingblock">
<div class="content"><div class="highlight"><pre><span></span><span class="n">ZaxJsonTopTokenizer</span> <span class="nf">json_doc</span><span class="p">(</span><span class="s">&quot;[3, 7, 11]&quot;</span><span class="p">,</span> <span class="nb">false</span><span class="p">);</span>

<span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="n">json_doc</span><span class="p">.</span><span class="n">m_list_values</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;</span>
<span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="n">json_doc</span><span class="p">.</span><span class="n">m_list_values</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;</span>
<span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="n">json_doc</span><span class="p">.</span><span class="n">m_list_values</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;</span>
</pre></div></div></div>
<div class="paragraph"><p><em>Result:</em></p></div>
<div class="listingblock">
<div class="content"><div class="highlight"><pre><span></span><span class="mi">3</span>
<span class="mi">7</span>
<span class="mi">11</span>
</pre></div></div></div>
<div class="paragraph"><p><em>Example 4:</em></p></div>
<div class="listingblock">
<div class="content"><div class="highlight"><pre><span></span><span class="n">ZaxJsonTopTokenizer</span> <span class="nf">json_doc</span><span class="p">(</span><span class="s">&quot;[</span><span class="se">\&quot;</span><span class="s">3</span><span class="se">\&quot;</span><span class="s">, </span><span class="se">\&quot;</span><span class="s">7</span><span class="se">\&quot;</span><span class="s">, </span><span class="se">\&quot;</span><span class="s">11</span><span class="se">\&quot;</span><span class="s">]&quot;</span><span class="p">,</span> <span class="nb">false</span><span class="p">);</span>

<span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="n">json_doc</span><span class="p">.</span><span class="n">m_list_values</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;</span>
<span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="n">json_doc</span><span class="p">.</span><span class="n">m_list_values</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;</span>
<span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="n">json_doc</span><span class="p">.</span><span class="n">m_list_values</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;</span>
</pre></div></div></div>
<div class="paragraph"><p><em>Result:</em></p></div>
<div class="listingblock">
<div class="content"><div class="highlight"><pre><span></span><span class="mi">3</span>
<span class="mi">7</span>
<span class="mi">11</span>
</pre></div></div></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img src="./images/icons/note.png" alt="Note" />
</td>
<td class="content">Mixed lists like <strong>[3, \"7\", \"11\"]</strong> are also supported, as the type information is lost already during tokenization (every token is a char*, without dashes).</td>
</tr></table>
</div>
</div>
</div>
<div class="sect1">
<h2 id="Converter_functions">Converter functions</h2>
<div class="sectionbody">
<div class="paragraph"><p>&#160;<br /></p></div>
<div class="paragraph"><p>In order for these functions to work, a macro needs to be defined describing meta information on the <em>names</em> of the members of the class of the object to be converted to- or from json strings. Pls see the examples.</p></div>
<div class="paragraph"><p>&#160;<br /></p></div>
<div class="paragraph"><p><strong><em>By using these functions, existing code does not need to be changed, therefore these might be used even for classes located in 3rd parties, or other places where no code change is desirable.</em></strong></p></div>
<div class="sect2">
<h3 id="zax_convert_to_json">zax_convert_to_json</h3>
<div class="paragraph"><p>&#160;<br /></p></div>
<div class="paragraph"><p>Is a macro function which creates a json string from an object.</p></div>
<div class="paragraph"><p>&#160;<br /></p></div>
<div class="paragraph"><p>Syntax: <strong>zax_convert_to_json([a_json], [a_obj], [a_json_properties])</strong></p></div>
<div class="ulist"><div class="title"><em>Parameters</em></div><ul>
<li>
<p>
<em>a_json</em>: (output)(const, char*) json string. Needs to be allocated by the caller.
</p>
</li>
<li>
<p>
<em>a_json_buffer_length</em>: (input)(int) the length of the memory field allocated for the json string passed as first argument.
</p>
</li>
<li>
<p>
<em>a_obj</em>: (input)(const, some <em>class</em> with public members) The input object to be converted to a JSON string.
</p>
</li>
<li>
<p>
<em>a_json_properties</em>: (input)(descriptor macro) meta information on the members of the <em>class</em> of the object passed as <em>a_obj</em>.
</p>
</li>
</ul></div>
<div class="ulist"><div class="title"><em>Returns</em></div><ul>
<li>
<p>
boolean: <em>true</em> on success, <em>false</em> on fail.
</p>
</li>
</ul></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img src="./images/icons/note.png" alt="Note" />
</td>
<td class="content">Class members which are not present in the a_json_properties argument macro will not be inserted in the JSON string.</td>
</tr></table>
</div>
<div class="paragraph"><p><em>Example 1:</em></p></div>
<div class="listingblock">
<div class="content"><div class="highlight"><pre><span></span><span class="k">struct</span> <span class="nc">struct1</span>
<span class="p">{</span>
    <span class="kt">int</span> <span class="n">x</span> <span class="o">=</span> <span class="mi">7</span><span class="p">;</span>
    <span class="n">string</span> <span class="n">name</span> <span class="o">=</span> <span class="s">&quot;seven&quot;</span><span class="p">;</span>
<span class="p">};</span>

<span class="cp">#define struct1_json_properties JSON_PROPERTY(x), JSON_PROPERTY(name)</span>

<span class="n">struct1</span> <span class="n">some_obj</span><span class="p">;</span>

<span class="kt">char</span> <span class="n">json_string</span><span class="p">[</span><span class="mi">1000</span><span class="p">];</span>
<span class="n">zax_convert_to_json</span><span class="p">(</span><span class="n">json_string</span><span class="p">,</span> <span class="k">sizeof</span><span class="p">(</span><span class="n">json_string</span><span class="p">),</span> <span class="n">some_obj</span><span class="p">,</span> <span class="n">struct1_json_properties</span><span class="p">);</span>
<span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="n">json_string</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;</span>
</pre></div></div></div>
<div class="paragraph"><p><em>Result:</em></p></div>
<div class="listingblock">
<div class="content"><div class="highlight"><pre><span></span><span class="p">{</span><span class="s">&quot;x&quot;</span><span class="o">:</span><span class="mi">7</span><span class="p">,</span> <span class="s">&quot;name&quot;</span><span class="o">:</span><span class="s">&quot;seven&quot;</span><span class="p">}</span>
</pre></div></div></div>
<div class="paragraph"><p>&#160;<br /></p></div>
<div class="paragraph"><p><strong>Aliases can be used by extending the json property descriptor in the following way:</strong></p></div>
<div class="paragraph"><p>&#160;<br /></p></div>
<div class="paragraph"><p><em>Example 2:</em></p></div>
<div class="listingblock">
<div class="content"><div class="highlight"><pre><span></span><span class="p">...</span><span class="n">same</span> <span class="n">code</span><span class="p">...</span>

<span class="cp">#define struct1_json_properties JSON_PROPERTY(x), JSON_PROPERTY(name, &quot;with_letters&quot;)</span>

<span class="p">...</span><span class="n">same</span> <span class="n">code</span><span class="p">...</span>
</pre></div></div></div>
<div class="paragraph"><p><em>Result:</em></p></div>
<div class="listingblock">
<div class="content"><div class="highlight"><pre><span></span><span class="p">{</span><span class="s">&quot;x&quot;</span><span class="o">:</span><span class="mi">7</span><span class="p">,</span> <span class="s">&quot;with_letters&quot;</span><span class="o">:</span><span class="s">&quot;seven&quot;</span><span class="p">}</span>
</pre></div></div></div>
</div>
<div class="sect2">
<h3 id="zax_convert_from_json">zax_convert_from_json</h3>
<div class="paragraph"><p>&#160;<br /></p></div>
<div class="paragraph"><p>Is a macro function which can fill up fields of an object with values from a json string.</p></div>
<div class="paragraph"><p>&#160;<br /></p></div>
<div class="paragraph"><p>Syntax: <strong>zax_convert_from_json([a_json], [a_obj], [a_json_properties])</strong></p></div>
<div class="ulist"><div class="title"><em>Parameters</em></div><ul>
<li>
<p>
<em>a_json</em>: (input)(const, char*) json string. Even it is passed as const, the string content might be changed during parsing.
</p>
</li>
<li>
<p>
<em>a_obj</em>: (output)(some <em>class</em> with public members) The output object. The fields of this object will be filled with the values in the JSON string.
</p>
</li>
<li>
<p>
<em>a_json_properties</em>: (input)(descriptor macro) meta information on the members of the <em>class</em> of the object passed as <em>a_obj</em>.
</p>
</li>
</ul></div>
<div class="ulist"><div class="title"><em>Returns</em></div><ul>
<li>
<p>
boolean: <em>true</em> on success, <em>false</em> on fail.
</p>
</li>
</ul></div>
<div class="paragraph"><p><em>Example 1:</em></p></div>
<div class="listingblock">
<div class="content"><div class="highlight"><pre><span></span><span class="k">struct</span> <span class="nc">struct1</span>
<span class="p">{</span>
    <span class="kt">int</span> <span class="n">x</span> <span class="o">=</span> <span class="mi">7</span><span class="p">;</span>
    <span class="n">string</span> <span class="n">name</span> <span class="o">=</span> <span class="s">&quot;seven&quot;</span><span class="p">;</span>
<span class="p">};</span>

<span class="cp">#define struct1_json_properties JSON_PROPERTY(x), JSON_PROPERTY(name)</span>

<span class="kt">char</span> <span class="n">json_string</span><span class="p">[]</span> <span class="o">=</span> <span class="s">&quot;{</span><span class="se">\&quot;</span><span class="s">x</span><span class="se">\&quot;</span><span class="s">:11, </span><span class="se">\&quot;</span><span class="s">name</span><span class="se">\&quot;</span><span class="s">:</span><span class="se">\&quot;</span><span class="s">eleven</span><span class="se">\&quot;</span><span class="s">}&quot;</span><span class="p">;</span>
<span class="n">zax_convert_from_json</span><span class="p">(</span><span class="n">json_string</span><span class="p">,</span> <span class="n">some_obj</span><span class="p">,</span> <span class="n">struct1_json_properties</span><span class="p">);</span>

<span class="kt">char</span> <span class="n">json_string2</span><span class="p">[</span><span class="mi">10000</span><span class="p">];</span>
<span class="n">zax_convert_to_json</span><span class="p">(</span><span class="n">json_string2</span><span class="p">,</span> <span class="k">sizeof</span><span class="p">(</span><span class="n">json_string2</span><span class="p">),</span> <span class="n">some_obj</span><span class="p">,</span> <span class="n">struct1_json_properties</span><span class="p">);</span>
<span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="n">json_string2</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;</span>
</pre></div></div></div>
<div class="paragraph"><p><em>Result:</em></p></div>
<div class="listingblock">
<div class="content"><div class="highlight"><pre><span></span><span class="p">{</span><span class="s">&quot;x&quot;</span><span class="o">:</span><span class="mi">11</span><span class="p">,</span> <span class="s">&quot;name&quot;</span><span class="o">:</span><span class="s">&quot;eleven&quot;</span><span class="p">}</span>
</pre></div></div></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img src="./images/icons/note.png" alt="Note" />
</td>
<td class="content">Possible extra elements in the input JSON string are ignored</td>
</tr></table>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="SERIALIZABLE_macros">SERIALIZABLE macros:</h2>
<div class="sectionbody">
<div class="paragraph"><p>&#160;<br /></p></div>
<div class="paragraph"><p>These macros are adding some constructors and operators to your class, making your objects assignable with JSON strings, and even printable to "cout".</p></div>
<div class="paragraph"><p>&#160;<br /></p></div>
<div class="paragraph"><p><strong><em>These macros are recommended if you are the one writing the code of the classes that needs to be JSON serializable, you need at least one of the features it provides, and the features does not interfere with other aspects of your design.</em></strong></p></div>
<div class="paragraph"><p>&#160;<br /></p></div>
<div class="sect2">
<h3 id="ZAX_JSON_SERIALIZABLE">ZAX_JSON_SERIALIZABLE</h3>
<div class="paragraph"><p>&#160;<br /></p></div>
<div class="paragraph"><p>Besides the constructors having <em>char*</em> and <em>string</em> arguments, this macro also adds a default constructor to your class.</p></div>
<div class="paragraph"><p>&#160;<br /></p></div>
<div class="paragraph"><p><em>Example 1:</em></p></div>
<div class="listingblock">
<div class="content"><div class="highlight"><pre><span></span><span class="cp">#define struct2_json_properties\</span>
<span class="cp">    JSON_PROPERTY(int1),\</span>
<span class="cp">    JSON_PROPERTY(int2),\</span>
<span class="cp">    JSON_PROPERTY(string1),\</span>
<span class="cp">    JSON_PROPERTY(string2)</span>

<span class="k">struct</span> <span class="nc">struct2</span>
<span class="p">{</span>
    <span class="kt">int</span> <span class="n">int1</span><span class="p">;</span>
    <span class="kt">int</span> <span class="n">int2</span><span class="p">;</span>
    <span class="n">string</span> <span class="n">string1</span><span class="p">;</span>
    <span class="n">string</span> <span class="n">string2</span><span class="p">;</span>

    <span class="n">ZAX_JSON_SERIALIZABLE</span><span class="p">(</span><span class="n">struct2</span><span class="p">,</span> <span class="n">struct2_json_properties</span><span class="p">)</span>
<span class="p">};</span>

<span class="n">string</span> <span class="n">json_string</span> <span class="o">=</span> <span class="s">&quot;{</span><span class="se">\&quot;</span><span class="s">int1</span><span class="se">\&quot;</span><span class="s">:11, </span><span class="se">\&quot;</span><span class="s">int2</span><span class="se">\&quot;</span><span class="s">:7, </span><span class="se">\&quot;</span><span class="s">string1</span><span class="se">\&quot;</span><span class="s">:</span><span class="se">\&quot;</span><span class="s">eleven</span><span class="se">\&quot;</span><span class="s">, </span><span class="se">\&quot;</span><span class="s">string2</span><span class="se">\&quot;</span><span class="s">:</span><span class="se">\&quot;</span><span class="s">seven</span><span class="se">\&quot;</span><span class="s">}&quot;</span><span class="p">;</span>
<span class="n">struct2</span> <span class="n">some_obj</span> <span class="o">=</span> <span class="n">json_string</span><span class="p">;</span>
<span class="n">string</span> <span class="n">json_string2</span> <span class="o">=</span> <span class="n">some_obj</span><span class="p">;</span>

<span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="n">json_string2</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;</span>
<span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="n">some_obj</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;</span>
</pre></div></div></div>
<div class="paragraph"><p><em>Result:</em></p></div>
<div class="listingblock">
<div class="content"><div class="highlight"><pre><span></span><span class="p">{</span><span class="s">&quot;int1&quot;</span><span class="o">:</span><span class="mi">11</span><span class="p">,</span> <span class="s">&quot;int2&quot;</span><span class="o">:</span><span class="mi">7</span><span class="p">,</span> <span class="s">&quot;string1&quot;</span><span class="o">:</span><span class="s">&quot;eleven&quot;</span><span class="p">,</span> <span class="s">&quot;string2&quot;</span><span class="o">:</span><span class="s">&quot;seven&quot;</span><span class="p">}</span>
<span class="p">{</span><span class="s">&quot;int1&quot;</span><span class="o">:</span><span class="mi">11</span><span class="p">,</span> <span class="s">&quot;int2&quot;</span><span class="o">:</span><span class="mi">7</span><span class="p">,</span> <span class="s">&quot;string1&quot;</span><span class="o">:</span><span class="s">&quot;eleven&quot;</span><span class="p">,</span> <span class="s">&quot;string2&quot;</span><span class="o">:</span><span class="s">&quot;seven&quot;</span><span class="p">}</span>
</pre></div></div></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img src="./images/icons/note.png" alt="Note" />
</td>
<td class="content">In order to have such simple structures, your classes needs to have a default constructor, which simple classes are having by default. But ZAX_JSON_SERIALIZABLE adds other constructors, which inhibits the compiler to add a the default constructor to your class.
Therefore, ZAX_JSON_SERIALIZABLE will try to add a default constructor to your code. This might be a problem in case you already have your own default constructor, because ZAX_JSON_SERIALIZABLE will fail to add another one. In this case please use the ZAX_JSON_SERIALIZABLE_WDC or ZAX_JSON_SERIALIZABLE_BASIC macros.</td>
</tr></table>
</div>
</div>
<div class="sect2">
<h3 id="ZAX_JSON_SERIALIZABLE_WDC">ZAX_JSON_SERIALIZABLE_WDC</h3>
<div class="paragraph"><p>&#160;<br /></p></div>
<div class="paragraph"><p>This macro adds only the constructors having <em>char*</em> and <em>string</em> arguments but adds no default constructor to your class.</p></div>
<div class="paragraph"><p>&#160;<br /></p></div>
<div class="paragraph"><p><em>Example 1:</em></p></div>
<div class="paragraph"><p>&#160;<br /></p></div>
<div class="listingblock">
<div class="content"><div class="highlight"><pre><span></span><span class="cp">#define struct2_json_properties\</span>
<span class="cp">    JSON_PROPERTY(int1),\</span>
<span class="cp">    JSON_PROPERTY(int2),\</span>
<span class="cp">    JSON_PROPERTY(string1),\</span>
<span class="cp">    JSON_PROPERTY(string2)</span>

<span class="k">struct</span> <span class="nc">struct2</span>
<span class="p">{</span>
    <span class="kt">int</span> <span class="n">int1</span><span class="p">;</span>
    <span class="kt">int</span> <span class="n">int2</span><span class="p">;</span>
    <span class="n">string</span> <span class="n">string1</span><span class="p">;</span>
    <span class="n">string</span> <span class="n">string2</span><span class="p">;</span>

    <span class="n">struct2</span><span class="p">()</span>
        <span class="o">:</span><span class="n">int1</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span>
    <span class="p">{}</span>

    <span class="n">ZAX_JSON_SERIALIZABLE_WDC</span><span class="p">(</span><span class="n">struct2</span><span class="p">,</span> <span class="n">struct2_json_properties</span><span class="p">)</span>
<span class="p">};</span>

<span class="n">string</span> <span class="n">json_string</span> <span class="o">=</span> <span class="s">&quot;{</span><span class="se">\&quot;</span><span class="s">int1</span><span class="se">\&quot;</span><span class="s">:11, </span><span class="se">\&quot;</span><span class="s">int2</span><span class="se">\&quot;</span><span class="s">:7, </span><span class="se">\&quot;</span><span class="s">string1</span><span class="se">\&quot;</span><span class="s">:</span><span class="se">\&quot;</span><span class="s">eleven</span><span class="se">\&quot;</span><span class="s">, </span><span class="se">\&quot;</span><span class="s">string2</span><span class="se">\&quot;</span><span class="s">:</span><span class="se">\&quot;</span><span class="s">seven</span><span class="se">\&quot;</span><span class="s">}&quot;</span><span class="p">;</span>
<span class="n">struct2</span> <span class="n">some_obj</span> <span class="o">=</span> <span class="n">json_string</span><span class="p">;</span>
<span class="n">string</span> <span class="n">json_string2</span> <span class="o">=</span> <span class="n">some_obj</span><span class="p">;</span>

<span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="n">json_string2</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;</span>
<span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="n">some_obj</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;</span>
</pre></div></div></div>
<div class="paragraph"><p><em>Result:</em></p></div>
<div class="listingblock">
<div class="content"><div class="highlight"><pre><span></span><span class="p">{</span><span class="s">&quot;int1&quot;</span><span class="o">:</span><span class="mi">11</span><span class="p">,</span> <span class="s">&quot;int2&quot;</span><span class="o">:</span><span class="mi">7</span><span class="p">,</span> <span class="s">&quot;string1&quot;</span><span class="o">:</span><span class="s">&quot;eleven&quot;</span><span class="p">,</span> <span class="s">&quot;string2&quot;</span><span class="o">:</span><span class="s">&quot;seven&quot;</span><span class="p">}</span>
<span class="p">{</span><span class="s">&quot;int1&quot;</span><span class="o">:</span><span class="mi">11</span><span class="p">,</span> <span class="s">&quot;int2&quot;</span><span class="o">:</span><span class="mi">7</span><span class="p">,</span> <span class="s">&quot;string1&quot;</span><span class="o">:</span><span class="s">&quot;eleven&quot;</span><span class="p">,</span> <span class="s">&quot;string2&quot;</span><span class="o">:</span><span class="s">&quot;seven&quot;</span><span class="p">}</span>
</pre></div></div></div>
</div>
<div class="sect2">
<h3 id="ZAX_JSON_SERIALIZABLE_BASIC">ZAX_JSON_SERIALIZABLE_BASIC</h3>
<div class="paragraph"><p>&#160;<br /></p></div>
<div class="paragraph"><p>This macro adds only basic converter functions, and adds no operators nor constructors.</p></div>
<div class="paragraph"><p>&#160;<br /></p></div>
<div class="paragraph"><p><em>Example 1:</em></p></div>
<div class="paragraph"><p>&#160;<br /></p></div>
<div class="listingblock">
<div class="content"><div class="highlight"><pre><span></span><span class="cp">#define struct2_json_properties\</span>
<span class="cp">    JSON_PROPERTY(int1),\</span>
<span class="cp">    JSON_PROPERTY(int2),\</span>
<span class="cp">    JSON_PROPERTY(string1),\</span>
<span class="cp">    JSON_PROPERTY(string2)</span>

<span class="k">struct</span> <span class="nc">struct2</span>
<span class="p">{</span>
    <span class="kt">int</span> <span class="n">int1</span><span class="p">;</span>
    <span class="kt">int</span> <span class="n">int2</span><span class="p">;</span>
    <span class="n">string</span> <span class="n">string1</span><span class="p">;</span>
    <span class="n">string</span> <span class="n">string2</span><span class="p">;</span>

    <span class="n">struct2</span><span class="p">()</span>
        <span class="o">:</span><span class="n">int1</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span>
    <span class="p">{}</span>

    <span class="n">ZAX_JSON_SERIALIZABLE_BASIC</span><span class="p">(</span><span class="n">struct2_json_properties</span><span class="p">)</span>
<span class="p">};</span>

<span class="n">struct2</span> <span class="n">some_obj</span><span class="p">;</span>
<span class="n">some_obj</span><span class="p">.</span><span class="n">zax_from_json</span><span class="p">(</span><span class="s">&quot;{</span><span class="se">\&quot;</span><span class="s">int1</span><span class="se">\&quot;</span><span class="s">:11, </span><span class="se">\&quot;</span><span class="s">int2</span><span class="se">\&quot;</span><span class="s">:7, </span><span class="se">\&quot;</span><span class="s">string1</span><span class="se">\&quot;</span><span class="s">:</span><span class="se">\&quot;</span><span class="s">eleven</span><span class="se">\&quot;</span><span class="s">, </span><span class="se">\&quot;</span><span class="s">string2</span><span class="se">\&quot;</span><span class="s">:</span><span class="se">\&quot;</span><span class="s">seven</span><span class="se">\&quot;</span><span class="s">}&quot;</span><span class="p">);</span>
</pre></div></div></div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="Parsing_of_data_structures">Parsing of data structures</h2>
<div class="sectionbody">
<div class="paragraph"><p>&#160;<br /></p></div>
<div class="paragraph"><p>The following std containers are supported:</p></div>
<div class="ulist"><ul>
<li>
<p>
<em>native arrays</em>
</p>
</li>
<li>
<p>
<em>std::vector</em>
</p>
</li>
<li>
<p>
<em>std::deque</em>
</p>
</li>
<li>
<p>
<em>std::list</em>
</p>
</li>
<li>
<p>
<em>std::forward_list</em>
</p>
</li>
</ul></div>
<div class="paragraph"><p>You may use your own containers. Requisits are either:</p></div>
<div class="ulist"><ul>
<li>
<p>
random access with <em>[]</em> operators (like native arrays),
</p>
</li>
<li>
<p>
and fixed size (like native arrays)
</p>
</li>
</ul></div>
<div class="paragraph"><p>or:</p></div>
<div class="ulist"><ul>
<li>
<p>
<em>begin()</em> and <em>end()</em> std like iterators,
</p>
</li>
<li>
<p>
<em>resize()</em> function
</p>
</li>
<li>
<p>
and <em>clear()</em> function
</p>
</li>
</ul></div>
<div class="paragraph"><p>&#160;<br /></p></div>
<div class="paragraph"><p><em>Example 1:</em></p></div>
<div class="listingblock">
<div class="content"><div class="highlight"><pre><span></span><span class="cp">#define struct3_json_props \</span>
<span class="cp">    JSON_PROPERTY(x), \</span>
<span class="cp">    JSON_PROPERTY(title, &quot;name&quot;), \</span>
<span class="cp">    JSON_PROPERTY(options)</span>

<span class="k">struct</span> <span class="nc">struct3</span>
<span class="p">{</span>
    <span class="kt">int</span> <span class="n">x</span><span class="p">;</span>
    <span class="n">string</span> <span class="n">title</span><span class="p">;</span>
    <span class="n">vector</span><span class="o">&lt;</span><span class="n">string</span><span class="o">&gt;</span> <span class="n">options</span><span class="p">;</span>

    <span class="n">ZAX_JSON_SERIALIZABLE</span><span class="p">(</span><span class="n">struct3</span><span class="p">,</span> <span class="n">struct3_json_props</span><span class="p">)</span>
<span class="p">};</span>

<span class="n">struct3</span> <span class="n">obj1</span> <span class="o">=</span> <span class="s">&quot;{ </span><span class="se">\&quot;</span><span class="s">x</span><span class="se">\&quot;</span><span class="s">:99, </span><span class="se">\&quot;</span><span class="s">title</span><span class="se">\&quot;</span><span class="s">:</span><span class="se">\&quot;</span><span class="s">test bible title</span><span class="se">\&quot;</span><span class="s">, </span><span class="se">\&quot;</span><span class="s">options</span><span class="se">\&quot;</span><span class="s">:[</span><span class="se">\&quot;</span><span class="s">option 1</span><span class="se">\&quot;</span><span class="s">, </span><span class="se">\&quot;</span><span class="s">option 2</span><span class="se">\&quot;</span><span class="s">, </span><span class="se">\&quot;</span><span class="s">option 3</span><span class="se">\&quot;</span><span class="s">]}&quot;</span><span class="p">;</span>
<span class="n">string</span> <span class="n">json_string2</span> <span class="o">=</span> <span class="n">obj1</span><span class="p">;</span>

<span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="n">json_string2</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;</span>
</pre></div></div></div>
<div class="paragraph"><p><em>Result:</em></p></div>
<div class="listingblock">
<div class="content"><div class="highlight"><pre><span></span><span class="p">{</span><span class="s">&quot;x&quot;</span><span class="o">:</span><span class="mi">99</span><span class="p">,</span> <span class="s">&quot;name&quot;</span><span class="o">:</span><span class="s">&quot;&quot;</span><span class="p">,</span> <span class="s">&quot;options&quot;</span><span class="o">:</span><span class="p">[</span><span class="s">&quot;option 1&quot;</span><span class="p">,</span> <span class="s">&quot;option 2&quot;</span><span class="p">,</span> <span class="s">&quot;option 3&quot;</span><span class="p">]}</span>
</pre></div></div></div>
<div class="paragraph"><p>&#160;<br /></p></div>
<div class="paragraph"><p><em><strong>It also works recursively:</strong></em></p></div>
<div class="paragraph"><p>&#160;<br /></p></div>
<div class="paragraph"><p><em>Example 2:</em></p></div>
<div class="listingblock">
<div class="content"><div class="highlight"><pre><span></span><span class="cp">#define struct3_json_props \</span>
<span class="cp">    JSON_PROPERTY(x), \</span>
<span class="cp">    JSON_PROPERTY(scores)</span>

<span class="k">struct</span> <span class="nc">struct3</span>
<span class="p">{</span>
    <span class="kt">int</span> <span class="n">x</span> <span class="o">=</span> <span class="mi">9</span><span class="p">;</span>
    <span class="n">std</span><span class="o">::</span><span class="n">vector</span><span class="o">&lt;</span><span class="n">std</span><span class="o">::</span><span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;&gt;</span> <span class="n">scores</span> <span class="o">=</span> <span class="p">{{</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">},</span> <span class="p">{</span><span class="mi">7</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">9</span><span class="p">}};</span>

    <span class="n">ZAX_JSON_SERIALIZABLE</span><span class="p">(</span><span class="n">struct3</span><span class="p">,</span> <span class="n">struct3_json_props</span><span class="p">)</span>
<span class="p">};</span>

<span class="n">struct3</span> <span class="n">obj1</span><span class="p">;</span>
<span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="n">obj1</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;</span>
</pre></div></div></div>
<div class="paragraph"><p><em>Result:</em></p></div>
<div class="listingblock">
<div class="content"><div class="highlight"><pre><span></span><span class="p">{</span><span class="s">&quot;x&quot;</span><span class="o">:</span><span class="mi">9</span><span class="p">,</span> <span class="s">&quot;scores&quot;</span><span class="o">:</span><span class="p">[[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">],</span> <span class="p">[</span><span class="mi">7</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">9</span><span class="p">]]}</span>
</pre></div></div></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img src="./images/icons/note.png" alt="Note" />
</td>
<td class="content">The elements of the vectors in the JSON string might also be strings, even if the vector is of integers, and vice versa. No error or warning will be present, the parsing will be successful in both cases and in both directions. However, mixed lists are not supported.</td>
</tr></table>
</div>
<div class="paragraph"><p><em>Example 2:</em></p></div>
<div class="listingblock">
<div class="content"><div class="highlight"><pre><span></span><span class="cp">#define struct3_json_props \</span>
<span class="cp">    JSON_PROPERTY(x), \</span>
<span class="cp">    JSON_PROPERTY(options)</span>

<span class="k">struct</span> <span class="nc">struct3</span>
<span class="p">{</span>
    <span class="kt">int</span> <span class="n">x</span> <span class="o">=</span> <span class="mi">9</span><span class="p">;</span>
    <span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span> <span class="n">options</span><span class="p">;</span>

    <span class="n">ZAX_JSON_SERIALIZABLE</span><span class="p">(</span><span class="n">struct3</span><span class="p">,</span> <span class="n">struct3_json_props</span><span class="p">)</span>
<span class="p">};</span>

<span class="kt">void</span> <span class="nf">json_example_03</span><span class="p">()</span>
<span class="p">{</span>
    <span class="n">struct3</span> <span class="n">obj1</span> <span class="o">=</span> <span class="s">&quot;{</span><span class="se">\&quot;</span><span class="s">x</span><span class="se">\&quot;</span><span class="s">:99, </span><span class="se">\&quot;</span><span class="s">options</span><span class="se">\&quot;</span><span class="s">:[</span><span class="se">\&quot;</span><span class="s">1</span><span class="se">\&quot;</span><span class="s">, </span><span class="se">\&quot;</span><span class="s">2</span><span class="se">\&quot;</span><span class="s">, </span><span class="se">\&quot;</span><span class="s">3</span><span class="se">\&quot;</span><span class="s">]}&quot;</span><span class="p">;</span>
    <span class="n">string</span> <span class="n">json_string2</span> <span class="o">=</span> <span class="n">obj1</span><span class="p">;</span>

    <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="n">json_string2</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;</span>
<span class="p">}</span>
</pre></div></div></div>
<div class="paragraph"><p><em>Result:</em></p></div>
<div class="listingblock">
<div class="content"><div class="highlight"><pre><span></span><span class="p">{</span><span class="s">&quot;x&quot;</span><span class="o">:</span><span class="mi">99</span><span class="p">,</span> <span class="s">&quot;options&quot;</span><span class="o">:</span><span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">]}</span>
</pre></div></div></div>
</div>
</div>
<div class="sect1">
<h2 id="Object_parsing_as_std_map">Object parsing as std::map or std::multimap</h2>
<div class="sectionbody">
<div class="paragraph"><p>&#160;<br /></p></div>
<div class="paragraph"><p>Homogenous objects can also be parsed as std::maps. The key is an std::string, while the values in the JSON must be convertable to the map&#8217;s value type.</p></div>
<div class="paragraph"><p>A value of <em>null</em> in the JSON will not add the pair to the map.</p></div>
<div class="paragraph"><p>&#160;<br /></p></div>
<div class="listingblock">
<div class="content"><div class="highlight"><pre><span></span><span class="cp">#define some_json_properties3 JSON_PROPERTY(assets)</span>

<span class="k">struct</span> <span class="nc">some_class3</span>
<span class="p">{</span>
    <span class="n">map</span><span class="o">&lt;</span><span class="n">string</span><span class="p">,</span> <span class="n">string</span><span class="o">&gt;</span> <span class="n">assets</span> <span class="o">=</span> <span class="p">{{</span><span class="s">&quot;Darth Vader&quot;</span><span class="p">,</span> <span class="s">&quot;Death Star&quot;</span><span class="p">},</span> <span class="p">{</span><span class="s">&quot;Lyra Belacqua&quot;</span><span class="p">,</span> <span class="s">&quot;Alethiometer&quot;</span><span class="p">}};</span>

    <span class="n">ZAX_JSON_SERIALIZABLE</span><span class="p">(</span><span class="n">some_class3</span><span class="p">,</span> <span class="n">some_json_properties3</span><span class="p">)</span>
<span class="p">};</span>

<span class="kt">void</span> <span class="nf">some_example3</span><span class="p">()</span>
<span class="p">{</span>
    <span class="n">some_class3</span> <span class="n">some_obj3</span> <span class="o">=</span> <span class="s">&quot;{</span><span class="se">\&quot;</span><span class="s">assets</span><span class="se">\&quot;</span><span class="s">:{</span><span class="se">\&quot;</span><span class="s">Marquez</span><span class="se">\&quot;</span><span class="s">: </span><span class="se">\&quot;</span><span class="s">Semantic dementia</span><span class="se">\&quot;</span><span class="s">, </span><span class="se">\&quot;</span><span class="s">Lyra Belacqua</span><span class="se">\&quot;</span><span class="s">:null}}&quot;</span><span class="p">;</span>

    <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="n">some_obj3</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;</span>
<span class="p">}</span>
</pre></div></div></div>
<div class="paragraph"><p><em>Result:</em></p></div>
<div class="listingblock">
<div class="content"><div class="highlight"><pre><span></span><span class="p">{</span><span class="s">&quot;assets&quot;</span><span class="o">:</span><span class="p">{</span><span class="s">&quot;Marquez&quot;</span><span class="o">:</span><span class="s">&quot;Semantic dementia&quot;</span><span class="p">}}</span>
</pre></div></div></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img src="./images/icons/note.png" alt="Note" />
</td>
<td class="content">Multimaps are supported like they were maps. JSON descriptors does not support multiple values bound to the same key, therefore multimaps shouldn&#8217;t have multiple values associated to a single key while converting. In case a multimap has multiple values, it will result in an invalid JSON, containing multiple values. The opposit direction: if an invalid JSON with multiple values is parsed, only the first value will be added to the multimap.</td>
</tr></table>
</div>
</div>
</div>
<div class="sect1">
<h2 id="Parsing_of_structures_with_fields_of_serializable_structures">Parsing of structures with fields of serializable structures</h2>
<div class="sectionbody">
<div class="paragraph"><p>&#160;<br /></p></div>
<div class="paragraph"><p>Parsing of structures inside structures is also possible, if the meta info of the inner structures are also provided.</p></div>
<div class="paragraph"><p>&#160;<br /></p></div>
<div class="paragraph"><p><em>Example 1:</em></p></div>
<div class="listingblock">
<div class="content"><div class="highlight"><pre><span></span><span class="cp">#define CClassInside_JOSONProps\</span>
<span class="cp">    JSON_PROPERTY(x),\</span>
<span class="cp">    JSON_PROPERTY(y)</span>

<span class="k">struct</span> <span class="nc">CClassInside</span>
<span class="p">{</span>
    <span class="kt">int</span> <span class="n">x</span> <span class="o">=</span> <span class="mi">11</span><span class="p">;</span>
    <span class="kt">int</span> <span class="n">y</span> <span class="o">=</span> <span class="mi">7</span><span class="p">;</span>

    <span class="n">ZAX_JSON_SERIALIZABLE</span><span class="p">(</span><span class="n">CClassInside</span><span class="p">,</span> <span class="n">CClassInside_JOSONProps</span><span class="p">)</span>
<span class="p">};</span>

<span class="cp">#define CClass_JOSONProps\</span>
<span class="cp">    JSON_PROPERTY(title),\</span>
<span class="cp">    JSON_PROPERTY(x),\</span>
<span class="cp">    JSON_PROPERTY(inside)</span>

<span class="k">struct</span> <span class="nc">CClass</span>
<span class="p">{</span>
    <span class="n">CClassInside</span> <span class="n">inside</span><span class="p">;</span>
    <span class="kt">int</span> <span class="n">x</span> <span class="o">=</span> <span class="mi">6</span><span class="p">;</span>
    <span class="n">string</span> <span class="n">title</span> <span class="o">=</span> <span class="s">&quot;some title&quot;</span><span class="p">;</span>

    <span class="n">ZAX_JSON_SERIALIZABLE</span><span class="p">(</span><span class="n">CClass</span><span class="p">,</span> <span class="n">CClass_JOSONProps</span><span class="p">)</span>
<span class="p">};</span>

<span class="n">CClass</span> <span class="n">some_obj</span> <span class="o">=</span> <span class="s">&quot;{</span><span class="se">\&quot;</span><span class="s">title</span><span class="se">\&quot;</span><span class="s">: </span><span class="se">\&quot;</span><span class="s">some other title</span><span class="se">\&quot;</span><span class="s">, </span><span class="se">\&quot;</span><span class="s">x</span><span class="se">\&quot;</span><span class="s">: 17, </span><span class="se">\&quot;</span><span class="s">inside</span><span class="se">\&quot;</span><span class="s">:{</span><span class="se">\&quot;</span><span class="s">x</span><span class="se">\&quot;</span><span class="s">:9, </span><span class="se">\&quot;</span><span class="s">y</span><span class="se">\&quot;</span><span class="s">:5}}&quot;</span><span class="p">;</span>
<span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="n">some_obj</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;</span>
</pre></div></div></div>
<div class="paragraph"><p><em>Result:</em></p></div>
<div class="listingblock">
<div class="content"><div class="highlight"><pre><span></span><span class="p">{</span><span class="s">&quot;title&quot;</span><span class="o">:</span><span class="s">&quot;some other title&quot;</span><span class="p">,</span> <span class="s">&quot;x&quot;</span><span class="o">:</span><span class="mi">17</span><span class="p">,</span> <span class="s">&quot;inside&quot;</span><span class="o">:</span><span class="p">{</span><span class="s">&quot;x&quot;</span><span class="o">:</span><span class="mi">9</span><span class="p">,</span> <span class="s">&quot;y&quot;</span><span class="o">:</span><span class="mi">5</span><span class="p">}}</span>
</pre></div></div></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img src="./images/icons/note.png" alt="Note" />
</td>
<td class="content">Of course, you may combine all the features. Note that if you are using an alias name for a filed, you should use the alias name in the JSON string as well.</td>
</tr></table>
</div>
<div class="paragraph"><p><em>Example 2:</em></p></div>
<div class="listingblock">
<div class="content"><div class="highlight"><pre><span></span><span class="cp">#define CClassInside_JOSONProps\</span>
<span class="cp">    JSON_PROPERTY(x),\</span>
<span class="cp">    JSON_PROPERTY(y)</span>

<span class="k">struct</span> <span class="nc">CClassInside</span>
<span class="p">{</span>
    <span class="kt">int</span> <span class="n">x</span> <span class="o">=</span> <span class="mi">11</span><span class="p">;</span>
    <span class="kt">int</span> <span class="n">y</span> <span class="o">=</span> <span class="mi">7</span><span class="p">;</span>

    <span class="n">ZAX_JSON_SERIALIZABLE</span><span class="p">(</span><span class="n">CClassInside</span><span class="p">,</span> <span class="n">CClassInside_JOSONProps</span><span class="p">)</span>
<span class="p">};</span>

<span class="cp">#define CClass_JOSONProps\</span>
<span class="cp">    JSON_PROPERTY(title),\</span>
<span class="cp">    JSON_PROPERTY(options),\</span>
<span class="cp">    JSON_PROPERTY(aspects, &quot;criteria&quot;),\</span>
<span class="cp">    JSON_PROPERTY(scores),\</span>
<span class="cp">    JSON_PROPERTY(x),\</span>
<span class="cp">    JSON_PROPERTY(inside),\</span>
<span class="cp">    JSON_PROPERTY(weights)</span>

<span class="k">struct</span> <span class="nc">CClass</span>
<span class="p">{</span>
    <span class="n">CClassInside</span> <span class="n">inside</span><span class="p">;</span>
    <span class="kt">int</span> <span class="n">x</span> <span class="o">=</span> <span class="mi">6</span><span class="p">;</span>
    <span class="n">string</span> <span class="n">title</span> <span class="o">=</span> <span class="s">&quot;some title&quot;</span><span class="p">;</span>
    <span class="n">vector</span><span class="o">&lt;</span><span class="n">string</span><span class="o">&gt;</span> <span class="n">options</span> <span class="o">=</span> <span class="p">{</span><span class="s">&quot;option1&quot;</span><span class="p">,</span> <span class="s">&quot;option2&quot;</span><span class="p">,</span> <span class="s">&quot;option3&quot;</span><span class="p">};</span>
    <span class="n">vector</span><span class="o">&lt;</span><span class="n">string</span><span class="o">&gt;</span> <span class="n">aspects</span> <span class="o">=</span> <span class="p">{</span><span class="s">&quot;criteria1&quot;</span><span class="p">,</span> <span class="s">&quot;criteria2&quot;</span><span class="p">};</span>
    <span class="n">std</span><span class="o">::</span><span class="n">vector</span><span class="o">&lt;</span><span class="n">std</span><span class="o">::</span><span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;&gt;</span> <span class="n">scores</span> <span class="o">=</span> <span class="p">{{</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">},</span> <span class="p">{</span><span class="mi">7</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">9</span><span class="p">}};</span>
    <span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span> <span class="n">weights</span> <span class="o">=</span> <span class="p">{</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">};</span>

    <span class="n">ZAX_JSON_SERIALIZABLE</span><span class="p">(</span><span class="n">CClass</span><span class="p">,</span> <span class="n">CClass_JOSONProps</span><span class="p">)</span>
<span class="p">};</span>

<span class="kt">char</span> <span class="n">json_string_copy</span><span class="p">[</span><span class="mi">10000</span><span class="p">];</span>
<span class="n">strcpy</span><span class="p">(</span><span class="n">json_string_copy</span><span class="p">,</span> <span class="s">&quot;{</span><span class="se">\&quot;</span><span class="s">x</span><span class="se">\&quot;</span><span class="s">:99, </span><span class="se">\&quot;</span><span class="s">criteria</span><span class="se">\&quot;</span><span class="s">:[</span><span class="se">\&quot;</span><span class="s">aspect x</span><span class="se">\&quot;</span><span class="s">], </span><span class="se">\&quot;</span><span class="s">title</span><span class="se">\&quot;</span><span class="s">:</span><span class="se">\&quot;</span><span class="s">test title</span><span class="se">\&quot;</span><span class="s">, </span><span class="se">\&quot;</span><span class="s">options</span><span class="se">\&quot;</span><span class="s">:[</span><span class="se">\&quot;</span><span class="s">option 1</span><span class="se">\&quot;</span><span class="s">, </span><span class="se">\&quot;</span><span class="s">option 2</span><span class="se">\&quot;</span><span class="s">, </span><span class="se">\&quot;</span><span class="s">option 3</span><span class="se">\&quot;</span><span class="s">], </span><span class="se">\&quot;</span><span class="s">nonexisting_field</span><span class="se">\&quot;</span><span class="s">:</span><span class="se">\&quot;\&quot;</span><span class="s">, </span><span class="se">\&quot;</span><span class="s">scores</span><span class="se">\&quot;</span><span class="s">:[[1, 1, 2], [3, 5, 8], [13, 21], [34, 55]], </span><span class="se">\&quot;</span><span class="s">weights</span><span class="se">\&quot;</span><span class="s">:[4, 3, 2, 1], </span><span class="se">\&quot;</span><span class="s">inside</span><span class="se">\&quot;</span><span class="s">:{</span><span class="se">\&quot;</span><span class="s">x</span><span class="se">\&quot;</span><span class="s">:</span><span class="se">\&quot;</span><span class="s">11</span><span class="se">\&quot;</span><span class="s">, </span><span class="se">\&quot;</span><span class="s">y</span><span class="se">\&quot;</span><span class="s">:</span><span class="se">\&quot;</span><span class="s">9</span><span class="se">\&quot;</span><span class="s">}}&quot;</span><span class="p">);</span>

<span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">&quot;Json string to be assigned to the object:&quot;</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span> <span class="o">&lt;&lt;</span> <span class="n">json_string_copy</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;</span>

<span class="n">CClass</span> <span class="n">some_obj</span> <span class="o">=</span> <span class="s">&quot;{}&quot;</span><span class="p">;</span>
<span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">&quot;Field of the object before assignment: &quot;</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span> <span class="o">&lt;&lt;</span> <span class="n">some_obj</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;</span>

<span class="n">some_obj</span> <span class="o">=</span> <span class="n">json_string_copy</span><span class="p">;</span>
<span class="n">string</span> <span class="n">json_std_string</span> <span class="o">=</span> <span class="n">some_obj</span><span class="p">;</span>
<span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">&quot;Json string computed after assignment: &quot;</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span> <span class="o">&lt;&lt;</span> <span class="n">json_std_string</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;</span>
</pre></div></div></div>
<div class="paragraph"><p><em>Result:</em></p></div>
<div class="listingblock">
<div class="content"><div class="highlight"><pre><span></span><span class="n">Json</span> <span class="n">string</span> <span class="n">to</span> <span class="n">be</span> <span class="n">assigned</span> <span class="n">to</span> <span class="n">the</span> <span class="nl">object</span><span class="p">:</span>
<span class="p">{</span><span class="s">&quot;x&quot;</span><span class="o">:</span><span class="mi">99</span><span class="p">,</span> <span class="s">&quot;criteria&quot;</span><span class="o">:</span><span class="p">[</span><span class="s">&quot;aspect x&quot;</span><span class="p">],</span> <span class="s">&quot;title&quot;</span><span class="o">:</span><span class="s">&quot;test title&quot;</span><span class="p">,</span> <span class="s">&quot;options&quot;</span><span class="o">:</span><span class="p">[</span><span class="s">&quot;option 1&quot;</span><span class="p">,</span> <span class="s">&quot;option 2&quot;</span><span class="p">,</span> <span class="s">&quot;option 3&quot;</span><span class="p">],</span> <span class="s">&quot;nonexisting_field&quot;</span><span class="o">:</span><span class="s">&quot;&quot;</span><span class="p">,</span> <span class="s">&quot;scores&quot;</span><span class="o">:</span><span class="p">[[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">],</span> <span class="p">[</span><span class="mi">3</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">8</span><span class="p">],</span> <span class="p">[</span><span class="mi">13</span><span class="p">,</span> <span class="mi">21</span><span class="p">],</span> <span class="p">[</span><span class="mi">34</span><span class="p">,</span> <span class="mi">55</span><span class="p">]],</span> <span class="s">&quot;weights&quot;</span><span class="o">:</span><span class="p">[</span><span class="mi">4</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">1</span><span class="p">],</span> <span class="s">&quot;inside&quot;</span><span class="o">:</span><span class="p">{</span><span class="s">&quot;x&quot;</span><span class="o">:</span><span class="s">&quot;11&quot;</span><span class="p">,</span> <span class="s">&quot;y&quot;</span><span class="o">:</span><span class="s">&quot;9&quot;</span><span class="p">}}</span>

<span class="n">Values</span> <span class="n">before</span> <span class="nl">assignment</span><span class="p">:</span>
<span class="p">{</span><span class="s">&quot;title&quot;</span><span class="o">:</span><span class="s">&quot;some title&quot;</span><span class="p">,</span> <span class="s">&quot;options&quot;</span><span class="o">:</span><span class="p">[</span><span class="s">&quot;option1&quot;</span><span class="p">,</span> <span class="s">&quot;option2&quot;</span><span class="p">,</span> <span class="s">&quot;option3&quot;</span><span class="p">],</span> <span class="s">&quot;criteria&quot;</span><span class="o">:</span><span class="p">[</span><span class="s">&quot;criteria1&quot;</span><span class="p">,</span> <span class="s">&quot;criteria2&quot;</span><span class="p">],</span> <span class="s">&quot;scores&quot;</span><span class="o">:</span><span class="p">[[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">],</span> <span class="p">[</span><span class="mi">7</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">9</span><span class="p">]],</span> <span class="s">&quot;x&quot;</span><span class="o">:</span><span class="mi">6</span><span class="p">,</span> <span class="s">&quot;inside&quot;</span><span class="o">:</span><span class="p">{</span><span class="s">&quot;x&quot;</span><span class="o">:</span><span class="mi">11</span><span class="p">,</span> <span class="s">&quot;y&quot;</span><span class="o">:</span><span class="mi">7</span><span class="p">},</span> <span class="s">&quot;weights&quot;</span><span class="o">:</span><span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">]}</span>

<span class="n">Json</span> <span class="n">string</span> <span class="n">computed</span> <span class="n">after</span> <span class="nl">assignment</span><span class="p">:</span>
<span class="p">{</span><span class="s">&quot;title&quot;</span><span class="o">:</span><span class="s">&quot;test title&quot;</span><span class="p">,</span> <span class="s">&quot;options&quot;</span><span class="o">:</span><span class="p">[</span><span class="s">&quot;option 1&quot;</span><span class="p">,</span> <span class="s">&quot;option 2&quot;</span><span class="p">,</span> <span class="s">&quot;option 3&quot;</span><span class="p">],</span> <span class="s">&quot;criteria&quot;</span><span class="o">:</span><span class="p">[</span><span class="s">&quot;aspect x&quot;</span><span class="p">],</span> <span class="s">&quot;scores&quot;</span><span class="o">:</span><span class="p">[[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">],</span> <span class="p">[</span><span class="mi">3</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">8</span><span class="p">],</span> <span class="p">[</span><span class="mi">13</span><span class="p">,</span> <span class="mi">21</span><span class="p">],</span> <span class="p">[</span><span class="mi">34</span><span class="p">,</span> <span class="mi">55</span><span class="p">]],</span> <span class="s">&quot;x&quot;</span><span class="o">:</span><span class="mi">99</span><span class="p">,</span> <span class="s">&quot;inside&quot;</span><span class="o">:</span><span class="p">{</span><span class="s">&quot;x&quot;</span><span class="o">:</span><span class="mi">11</span><span class="p">,</span> <span class="s">&quot;y&quot;</span><span class="o">:</span><span class="mi">9</span><span class="p">},</span> <span class="s">&quot;weights&quot;</span><span class="o">:</span><span class="p">[</span><span class="mi">4</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">1</span><span class="p">]}</span>
</pre></div></div></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img src="./images/icons/note.png" alt="Note" />
</td>
<td class="content">As I was implementing the features I needed only, the implementations might be incomplete. I have implemented the possibility of error handling, but just a limited information is passed back to the user, and I skipped to test even that limited info.</td>
</tr></table>
</div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<img src="./images/icons/note.png" alt="Note" />
</td>
<td class="content">For the outter layers, the <em>null</em> value support is special. As no structures with pointers are supported, <em>null</em> to struct member "conversion" is type specific: numbers get a value of <em>0</em>, string lengths are set to zero, vectors are cleared, and basic arrays' elemnts are set according to their type just mentioned.</td>
</tr></table>
</div>
</div>
</div>
</div>
<div id="footnotes"><hr /></div>
<div id="footer">
<div id="footer-text">
Last updated 2021-01-10 14:03:44 Central Europe Standard Time
</div>
</div>
</body>
</html>
